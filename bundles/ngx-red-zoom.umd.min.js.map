{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/ngx-red-zoom/src/lib/red-zoom-template.class.ts","../../../projects/ngx-red-zoom/src/lib/red-zoom-image.class.ts","../../../projects/ngx-red-zoom/src/lib/vector.ts","../../../projects/ngx-red-zoom/src/lib/red-zoom.directive.ts","../../../projects/ngx-red-zoom/src/lib/red-zoom.module.ts"],"names":["Object","create","__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","__read","n","r","e","ar","push","error","__spread","arguments","concat","template","makeTemplate","document","createElement","innerHTML","content","cloneNode","firstChild","RedZoomTemplate","_this","this","_status","appliedClasses","onTransitionEnd","event","propertyName","isHidden","remove","lens","querySelector","lensBody","frame","frameBody","errorMessage","addEventListener","status","defineProperty","prototype","state","classList","add","classes","_a","apply","trim","replace","split","_b","getComputedStyle","visibility","setProperties","properties","name","style","setProperty","detach","attach","parentNode","body","appendChild","activate","RedZoomImage","element","listener","className","loading","isFirst","_listener","destroy","removeEventListener","width","height","x","y","naturalWidth","naturalHeight","complete","src","setAttribute","reset","calc","a","op","b","Math","min","max","fromRectSize","rect","fromScroll","scrollX","scrollY","fromMouseEvent","clientX","clientY","sub","mul","div","round","map","fn","flatMax","RedZoomDirective","renderer","zone","platformId","previousStatus","lazy","behavior","wheel","scaleFactor","requestAnimationFrameId","unlisten","onImageChangeStatus","onImageChangeStatusDistinct","--red-zoom-lens-image-natural-w","lensImage","--red-zoom-lens-image-natural-h","session","active","calcScaleFactor","calcFrameSize","move","mouseEnter","cancelable","preventDefault","thumbSize","thumbPos","lensContainerSize","lensImageSize","frameSize","mousePos","vector.fromMouseEvent","unListenMove","unListenLeave","unListenWheel","onMove","mouseEvent","onMouseMove","onLeave","listen","nativeElement","contains","target","wheelEvent","delta","sign","deltaY","nextScaleFactor","console","log","undefined","minScaleFactor","maxScaleFactor","forceReflow","loadLensImage","loadFrameImage","isImage","thumbImage","initSession","cancelAnimationFrame","requestAnimationFrame","tagName","images","frameImage","images_1","images_1_1","image","startEventName","hover","grab","click","ngAfterContentInit","isPlatformBrowser","runOutsideAngular","ngOnChanges","changes","firstChange","onChangeThumbSrc","thumbSrc","lensSrc","onChangeLensSrc","invalidate","ngOnDestroy","getThumbSrc","thumbRect","getBoundingClientRect","vector.fromRectSize","vector.add","left","top","vector.fromScroll","--red-zoom-thumb-x","--red-zoom-thumb-y","--red-zoom-thumb-w","--red-zoom-thumb-h","--red-zoom-thumb-size-max","vector.flatMax","--red-zoom-thumb-size-min","scaledSize","vector.mul","naturalSize","styleSize","vector.map","c","vector.flatOr","size","vector.round","vector.div","vector.min","--red-zoom-frame-w","--red-zoom-frame-h","--red-zoom-mouse-x","--red-zoom-mouse-y","framePos","vector.sub","frameLimitedPos","vector.max","frameImagePos","--red-zoom-frame-x","--red-zoom-frame-y","--red-zoom-frame-image-x","--red-zoom-frame-image-y","lensImagePos","axis","lensImageCenterOffset","lensImageFrameOffset","--red-zoom-lens-image-base-x","--red-zoom-lens-image-base-y","--red-zoom-lens-image-center-offset-x","--red-zoom-lens-image-center-offset-y","--red-zoom-lens-image-frame-offset-x","--red-zoom-lens-image-frame-offset-y","Directive","args","selector","exportAs","ElementRef","Renderer2","NgZone","Inject","PLATFORM_ID","Input","type","HostBinding","NgModule","declarations","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { RedZoomStatus } from './red-zoom-status.type';\n\n\nconst makeTemplate = (() => {\n    let template: HTMLTemplateElement = null;\n\n    return () => {\n        if (!template) {\n            template = document.createElement('template');\n            template.innerHTML = `<div class=\"red-zoom\">\n                <div class=\"red-zoom__overlay\"></div>\n                <div class=\"red-zoom__frame\">\n                    <div class=\"red-zoom__frame-body\"></div>\n                </div>\n                <div class=\"red-zoom__lens\">\n                    <div class=\"red-zoom__lens-body\"></div>\n                </div>\n                <div class=\"red-zoom__error\">\n                    <div class=\"red-zoom__error-message\"></div>\n                </div>\n            </div>`;\n        }\n\n        return template.content.cloneNode(true).firstChild as HTMLDivElement;\n    };\n})();\n\n\nexport class RedZoomTemplate {\n    _status: RedZoomStatus = null;\n\n    template: HTMLDivElement;\n    lens: HTMLDivElement;\n    lensBody: HTMLDivElement;\n    frame: HTMLDivElement;\n    frameBody: HTMLDivElement;\n    error: HTMLDivElement;\n    errorMessage: HTMLDivElement;\n\n    private appliedClasses: string[] = [];\n\n    constructor() {\n        this.template = makeTemplate();\n        this.lens = this.template.querySelector('.red-zoom__lens');\n        this.lensBody = this.template.querySelector('.red-zoom__lens-body');\n        this.frame = this.template.querySelector('.red-zoom__frame');\n        this.frameBody = this.template.querySelector('.red-zoom__frame-body');\n        this.error = this.template.querySelector('.red-zoom__error');\n        this.errorMessage = this.template.querySelector('.red-zoom__error-message');\n\n        this.template.addEventListener('transitionend', this.onTransitionEnd);\n        this.status = 'loading';\n    }\n\n    set status(state: RedZoomStatus) {\n        if (this._status !== null) {\n            this.template.classList.remove(`red-zoom--status--${this._status}`);\n        }\n\n        this._status = state;\n        this.template.classList.add(`red-zoom--status--${state}`);\n    }\n\n    get status(): RedZoomStatus {\n        return this._status;\n    }\n\n    set classes(classes: string) {\n        this.template.classList.remove(...this.appliedClasses);\n\n        classes = classes.trim();\n\n        if (classes) {\n            this.appliedClasses = classes.replace(/ +/, ' ').split(' ');\n            this.template.classList.add(...this.appliedClasses);\n        }\n    }\n\n    get isHidden(): boolean {\n        return getComputedStyle(this.template).visibility === 'hidden';\n    }\n\n    setProperties(properties: {[name: string]: string}): void {\n        for (let name in properties) {\n            this.template.style.setProperty(name, properties[name]);\n        }\n    }\n\n    detach(): void {\n        this.template.classList.remove('red-zoom--active');\n\n        if (this.isHidden) {\n            this.template.remove();\n        }\n    }\n\n    attach(): void {\n        if (this.template.parentNode !== document.body) {\n            document.body.appendChild(this.template);\n        }\n    }\n\n    activate(): void {\n        this.template.classList.add('red-zoom--active');\n    }\n\n    onTransitionEnd = (event: TransitionEvent) => {\n        if (event.propertyName === 'visibility' && this.isHidden) {\n            this.template.remove();\n        }\n    };\n}\n","import { RedZoomStatus } from './red-zoom-status.type';\nimport * as vector from './vector';\n\n\nexport class RedZoomImage {\n    private loading = false;\n\n    isFirst = true;\n\n    get width(): number {\n        return this.element.width;\n    }\n\n    get height(): number {\n        return this.element.height;\n    }\n\n    get size(): vector.VectorNumber {\n        return {x: this.width, y: this.height};\n    }\n\n    get naturalWidth(): number {\n        return this.element.naturalWidth;\n    }\n\n    get naturalHeight(): number {\n        return this.element.naturalHeight;\n    }\n\n    get naturalSize(): vector.VectorNumber {\n        return {x: this.naturalWidth, y: this.naturalHeight};\n    }\n\n    get style(): CSSStyleDeclaration {\n        return this.element.style;\n    }\n\n    set styleSize(value: vector.VectorString) {\n        this.element.style.width = value.x;\n        this.element.style.height = value.y;\n    }\n\n    get status(): RedZoomStatus {\n        if (this.loading) {\n            return 'loading';\n        }\n\n        if (this.element.complete) {\n            if (!this.element.src) {\n                return 'loading';\n            } else if (this.naturalWidth === 0) {\n                return 'error';\n            }\n\n            return 'loaded';\n        }\n\n        return 'loading';\n    }\n\n    set src(value: string) {\n        this.loading = false;\n        this.element.setAttribute('src', value);\n    }\n\n    constructor(\n        public element: HTMLImageElement = null,\n        public listener: () => void = () => {},\n        className: string = null,\n    ) {\n        if (element === null) {\n            this.element = document.createElement('img');\n        }\n\n        const _listener = () => {\n            if (this.status !== 'loading') {\n                this.isFirst = false;\n            }\n\n            this.listener();\n        };\n\n        this.element.addEventListener('load', _listener);\n        this.element.addEventListener('error', _listener);\n\n        this.destroy = () => {\n            this.element.removeEventListener('load', _listener);\n            this.element.removeEventListener('error', _listener);\n        };\n\n        if (className !== null) {\n            this.element.classList.add(className);\n        }\n    }\n\n    reset(): void {\n        this.loading = true;\n        this.listener();\n    }\n\n    destroy: () => void;\n}\n","type Operator = '+'|'-'|'*'|'/'|'min'|'max';\n\nfunction calc(a: number, op: Operator, b: number) {\n    switch (op) {\n        case '+': return a + b;\n        case '-': return a - b;\n        case '*': return a * b;\n        case '/': return a / b;\n        case 'min': return Math.min(a, b);\n        case 'max': return Math.max(a, b);\n    }\n}\n\nexport interface Vector<T> {\n    x: T,\n    y: T,\n}\n\nexport type VectorNumber = Vector<number>;\n\nexport type VectorString = Vector<string>;\n\nexport type VectorBoolean = Vector<boolean>;\n\nexport function fromRectPos(rect: ClientRect): VectorNumber {\n    return {x: rect.left, y: rect.top};\n}\n\nexport function fromRectSize(rect: ClientRect): VectorNumber {\n    return {x: rect.width, y: rect.height};\n}\n\nexport function fromScroll(): VectorNumber {\n    return {x: scrollX, y: scrollY};\n}\n\nexport function fromMouseEvent(event: MouseEvent): VectorNumber {\n    return add({x: event.clientX, y: event.clientY}, fromScroll());\n}\n\nexport function op(a: VectorNumber, op: Operator, b: VectorNumber | number): VectorNumber {\n    if (typeof b === 'number') {\n        b = {x: b, y: b};\n    }\n\n    return {\n        x: calc(a.x, op, b.x),\n        y: calc(a.y, op, b.y)\n    };\n}\n\nexport function add(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, '+', b);\n}\n\nexport function sub(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, '-', b);\n}\n\nexport function mul(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, '*', b);\n}\n\nexport function div(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, '/', b);\n}\n\nexport function min(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, 'min', b);\n}\n\nexport function max(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, 'max', b);\n}\n\nexport function round(a: VectorNumber): VectorNumber {\n    return map(a, Math.round);\n}\n\nexport function map<T, B>(a: Vector<T>, fn: (c: T, axis: 'x'|'y') => B): Vector<B> {\n    return {x: fn(a.x, 'x'), y: fn(a.y, 'y')};\n}\n\nexport function equal(a: VectorNumber, b: VectorNumber | number): VectorBoolean {\n    if (typeof b === 'number') {\n        b = {x: b, y: b};\n    }\n\n    return {\n        x: a.x === b.x,\n        y: a.y === b.y,\n    };\n}\n\nexport function notEqual(a: VectorNumber, b: VectorNumber): VectorBoolean {\n    return {x: a.x !== b.x, y: a.y !== b.y};\n}\n\nexport function flatMax(a: VectorNumber): number {\n    return Math.max(a.x, a.y);\n}\n\nexport function flatMin(a: VectorNumber): number {\n    return Math.min(a.x, a.y);\n}\n\nexport function flatOr(a: VectorBoolean): boolean {\n    return a.x || a.y;\n}\n","import {\n    AfterContentInit,\n    Directive,\n    ElementRef,\n    Inject,\n    Input,\n    NgZone,\n    Renderer2,\n    OnChanges,\n    SimpleChanges,\n    HostBinding, OnDestroy, PLATFORM_ID\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { RedZoomTemplate } from './red-zoom-template.class';\nimport { RedZoomStatus } from './red-zoom-status.type';\nimport { RedZoomImage } from './red-zoom-image.class';\nimport * as vector from './vector';\nimport { VectorNumber } from './vector';\n\n\ninterface Session {\n    active: boolean;\n    thumbSize: vector.VectorNumber;\n    thumbPos: vector.VectorNumber;\n    lensContainerSize: vector.VectorNumber;\n    lensImageSize: vector.VectorNumber;\n    frameSize: vector.VectorNumber;\n    mousePos: vector.VectorNumber;\n    destroy: () => void;\n}\n\n\n@Directive({\n    selector: '[redZoom]',\n    exportAs: 'redZoom',\n})\nexport class RedZoomDirective implements AfterContentInit, OnChanges, OnDestroy {\n    @Input('src') @HostBinding('attr.src') src: string;\n\n    @Input('redZoom') lensSrc: string;\n\n    @Input('redZoomThumb') thumbSrc: string;\n\n    @Input('redZoomLazy') lazy: boolean = false;\n\n    @Input('redZoomClass') classes: string = '';\n\n    @Input('redZoomBehavior') behavior: 'hover' | 'grab' | 'click' = 'hover';\n\n    @Input('redZoomMouseWheel') wheel: boolean = true;\n\n    @Input() minScaleFactor: number;\n\n    @Input() maxScaleFactor: number;\n\n    @Input('redZoomErrorMessage') errorMessage: string = 'An error occurred while loading the image.';\n\n    template: RedZoomTemplate;\n    thumbImage: RedZoomImage;\n    frameImage: RedZoomImage;\n    lensImage: RedZoomImage;\n    scaleFactor = 1;\n    session: Session;\n    requestAnimationFrameId = null;\n\n    get isImage(): boolean {\n        return this.element.nativeElement.tagName === 'IMG';\n    }\n\n    get status(): RedZoomStatus {\n        let status: RedZoomStatus = 'loaded';\n        const images = [this.frameImage, this.lensImage];\n\n        if (this.isImage) {\n            images.push(this.thumbImage);\n        }\n\n        for (let image of images) {\n            if (status === 'error' || image.status === 'error') {\n                status = 'error';\n            } else if (status === 'loading' || image.status === 'loading') {\n                status = 'loading';\n            }\n        }\n\n        return status;\n    }\n\n    constructor(\n        private element: ElementRef,\n        private renderer: Renderer2,\n        private zone: NgZone,\n        @Inject(PLATFORM_ID) private platformId: string,\n    ) { }\n\n    listen(): void {\n        const startEventName = {\n            'hover': 'mouseenter',\n            'grab': 'mousedown',\n            'click': 'mousedown',\n        }[this.behavior];\n\n        this.unlisten();\n        this.unlisten = this.renderer.listen(this.element.nativeElement, startEventName, this.mouseEnter);\n    }\n\n    unlisten: () => void  = () => {};\n\n    onImageChangeStatus = (() => {\n        let previousStatus;\n\n        return () => {\n            if (previousStatus === this.status) {\n                return;\n            }\n\n            previousStatus = this.status;\n\n            this.onImageChangeStatusDistinct();\n        };\n    })();\n\n    onImageChangeStatusDistinct = () => {\n        this.template.status = this.status;\n\n        if (this.status === 'loaded') {\n            this.template.setProperties({\n                '--red-zoom-lens-image-natural-w': `${this.lensImage.naturalWidth}px`,\n                '--red-zoom-lens-image-natural-h': `${this.lensImage.naturalHeight}px`,\n            });\n\n            if (this.session && this.session.active) {\n                this.calcScaleFactor();\n                this.calcFrameSize();\n                this.move();\n\n                this.scaleFactor = this.lensImage.width / this.lensImage.naturalWidth;\n            }\n        }\n    };\n\n    ngAfterContentInit(): void {\n        if (!isPlatformBrowser(this.platformId)) {\n            return;\n        }\n\n        this.zone.runOutsideAngular(() => {\n            this.template = new RedZoomTemplate();\n            this.template.classes = this.classes;\n            this.template.errorMessage.innerHTML = this.errorMessage;\n\n            if (this.isImage) {\n                this.thumbImage = new RedZoomImage(this.element.nativeElement, this.onImageChangeStatus);\n            }\n\n            this.frameImage = new RedZoomImage(null, this.onImageChangeStatus, 'red-zoom__frame-image');\n            this.lensImage = new RedZoomImage(null, this.onImageChangeStatus, 'red-zoom__lens-image');\n\n            if (!this.lazy) {\n                this.loadFrameImage();\n                this.loadLensImage();\n            }\n\n            this.listen();\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (!isPlatformBrowser(this.platformId)) {\n            return;\n        }\n\n        if ('src' in changes && !changes.src.firstChange) {\n            this.onChangeThumbSrc();\n        }\n        if ('thumbSrc' in changes && !changes.thumbSrc.firstChange) {\n            this.onChangeThumbSrc();\n        }\n        if ('lensSrc' in changes && !changes.lensSrc.firstChange) {\n            this.onChangeLensSrc();\n        }\n        if ('behavior' in changes && !changes.behavior.firstChange) {\n            this.listen();\n        }\n        if ('classes' in changes && !changes.classes.firstChange) {\n            this.template.classes = this.classes;\n            this.invalidate();\n        }\n        if ('errorMessage' in changes && !changes.errorMessage.firstChange) {\n            this.template.errorMessage.innerHTML = this.errorMessage;\n        }\n    }\n\n    ngOnDestroy(): void {\n        if (!isPlatformBrowser(this.platformId)) {\n            return;\n        }\n\n        if (this.session) {\n            this.session.destroy();\n        }\n    }\n\n    onChangeThumbSrc(): void {\n        this.frameImage.reset();\n\n        if (!this.lazy || this.session) {\n            this.loadFrameImage();\n        }\n    }\n\n    onChangeLensSrc(): void {\n        this.lensImage.reset();\n\n        if (!this.lazy || this.session) {\n            this.loadLensImage();\n        }\n    }\n\n    getThumbSrc(): string {\n        if (!this.isImage || !this.src) {\n            return this.thumbSrc;\n        }\n\n        return this.src;\n    }\n\n    loadLensImage() {\n        if (this.lensImage.status !== 'loaded') {\n            this.lensImage.src = this.lensSrc;\n        }\n    }\n\n    loadFrameImage() {\n        if (this.frameImage.status !== 'loaded') {\n            this.frameImage.src = this.getThumbSrc();\n        }\n    }\n\n    mouseEnter = (event: MouseEvent) => {\n        if (event.cancelable) {\n            event.preventDefault();\n        }\n\n        if (this.session) {\n            this.session.destroy();\n        }\n\n        this.session = {\n            active: false,\n            thumbSize: null,\n            thumbPos: null,\n            lensContainerSize: null,\n            lensImageSize: null,\n            frameSize: null,\n            mousePos: vector.fromMouseEvent(event),\n            destroy: () => {},\n        };\n\n        const onWheel = (wheelEvent: WheelEvent) => {\n            if (!wheelEvent.cancelable || this.status !== 'loaded' || !this.wheel) {\n                return;\n            }\n\n            wheelEvent.preventDefault();\n\n            const delta = Math.sign(wheelEvent.deltaY);\n            const nextScaleFactor = this.scaleFactor + .01 * -delta;\n\n            console.log(nextScaleFactor);\n\n            if (this.minScaleFactor !== undefined && nextScaleFactor < this.minScaleFactor) {\n                return;\n            }\n            if (this.maxScaleFactor !== undefined && nextScaleFactor > this.maxScaleFactor) {\n                return;\n            }\n\n            this.scaleFactor += .01 * -delta;\n\n            this.calcScaleFactor();\n            this.calcFrameSize();\n            this.onMouseMove(\n                this.behavior === 'click' ? this.session.mousePos : vector.fromMouseEvent(wheelEvent),\n            );\n        };\n\n        const onMove = (mouseEvent: MouseEvent) => {\n            this.onMouseMove(vector.fromMouseEvent(mouseEvent));\n        };\n        const onLeave = () => {\n            this.session = null;\n            this.template.detach();\n\n            unListenMove();\n            unListenLeave();\n            unListenWheel();\n        };\n\n        let unListenMove;\n        let unListenLeave;\n        let unListenWheel;\n\n        if (this.behavior === 'hover') {\n            unListenMove = this.renderer.listen(this.element.nativeElement, 'mousemove', onMove);\n            unListenLeave = this.renderer.listen(this.element.nativeElement, 'mouseleave', onLeave);\n        } else if (this.behavior === 'click') {\n            unListenMove = () => {};\n            unListenLeave = this.renderer.listen(document, 'mousedown', (event) => {\n                const element = this.element.nativeElement as HTMLElement;\n\n                if (!element.contains(event.target)) {\n                    onLeave();\n                }\n            });\n        } else {\n            unListenMove = this.renderer.listen(document, 'mousemove', onMove);\n            unListenLeave = this.renderer.listen(document, 'mouseup', onLeave);\n        }\n\n        unListenWheel = this.renderer.listen(this.element.nativeElement, 'wheel', onWheel);\n\n        this.onMouseMove(vector.fromMouseEvent(event));\n\n        this.forceReflow();\n        this.template.activate();\n\n        if (this.status !== 'loaded') {\n            this.loadLensImage();\n            this.loadFrameImage();\n        }\n\n        this.session.destroy = onLeave;\n    };\n\n    onMouseMove = (mousePos: VectorNumber) => {\n        if (this.isImage && this.thumbImage.status !== 'loaded' && this.thumbImage.isFirst) {\n            return;\n        }\n\n        if (!this.session.active) {\n            this.session.active = true;\n            this.initSession();\n        }\n\n        this.session.mousePos = mousePos;\n\n        if (this.status === 'loaded') {\n            cancelAnimationFrame(this.requestAnimationFrameId);\n\n            this.requestAnimationFrameId = requestAnimationFrame(() => this.move());\n        }\n    };\n\n    initSession(): void {\n        const thumbRect = this.element.nativeElement.getBoundingClientRect();\n\n        this.session.thumbSize = vector.fromRectSize(thumbRect);\n        this.session.thumbPos = vector.add(vector.fromRectPos(thumbRect), vector.fromScroll());\n\n        this.template.attach();\n        this.template.lensBody.appendChild(this.lensImage.element);\n        this.template.frameBody.appendChild(this.frameImage.element);\n\n        this.template.setProperties({\n            '--red-zoom-thumb-x': `${this.session.thumbPos.x}px`,\n            '--red-zoom-thumb-y': `${this.session.thumbPos.y}px`,\n            '--red-zoom-thumb-w': `${this.session.thumbSize.x}px`,\n            '--red-zoom-thumb-h': `${this.session.thumbSize.y}px`,\n            '--red-zoom-thumb-size-max': `${vector.flatMax(this.session.thumbSize)}px`,\n            '--red-zoom-thumb-size-min': `${vector.flatMin(this.session.thumbSize)}px`,\n        });\n\n        if (this.status === 'loaded') {\n            this.calcScaleFactor();\n            this.calcFrameSize();\n\n            this.scaleFactor = this.lensImage.width / this.lensImage.naturalWidth;\n        }\n    }\n\n    calcScaleFactor(): void {\n        const scaledSize = vector.mul(this.lensImage.naturalSize, this.scaleFactor);\n\n        this.lensImage.styleSize = vector.map(scaledSize, c => `${c}px`);\n\n        const scaleFactorIsLimited = vector.flatOr(\n            vector.notEqual(this.lensImage.size, vector.round(scaledSize))\n        );\n\n        if (scaleFactorIsLimited) {\n            this.scaleFactor = vector.flatMax(vector.div(this.lensImage.size, this.lensImage.naturalSize));\n\n            this.lensImage.styleSize = vector.map(vector.mul(this.lensImage.naturalSize, this.scaleFactor), c => `${c}px`);\n        }\n    }\n\n    calcFrameSize(): void {\n        this.session.lensContainerSize = vector.fromRectSize(this.template.lensBody.getBoundingClientRect());\n        this.session.lensImageSize = vector.fromRectSize(this.lensImage.element.getBoundingClientRect());\n\n        this.session.frameSize = vector.min(\n            this.session.thumbSize,\n            vector.round(\n                vector.mul(\n                    this.session.thumbSize, vector.div(this.session.lensContainerSize, this.session.lensImageSize)\n                )\n            )\n        );\n\n        this.template.setProperties({\n            '--red-zoom-frame-w': `${this.session.frameSize.x}px`,\n            '--red-zoom-frame-h': `${this.session.frameSize.y}px`,\n        });\n    }\n\n    move(): void {\n        if (!this.session || !this.session.active) {\n            return;\n        }\n\n        const { mousePos, thumbSize, thumbPos, frameSize, lensContainerSize, lensImageSize } = this.session;\n\n        this.template.setProperties({\n            '--red-zoom-mouse-x': `${mousePos.x}px`,\n            '--red-zoom-mouse-y': `${mousePos.y}px`,\n        });\n\n        const framePos = vector.sub(mousePos, vector.div(frameSize, 2));\n        const frameLimitedPos = vector.min(\n            vector.max(framePos, thumbPos),\n            vector.sub(vector.add(thumbPos, thumbSize), frameSize),\n        );\n        const frameImagePos = vector.sub(thumbPos, vector.round(frameLimitedPos));\n\n        this.template.setProperties({\n            '--red-zoom-frame-x': `${Math.round(frameLimitedPos.x)}px`,\n            '--red-zoom-frame-y': `${Math.round(frameLimitedPos.y)}px`,\n            '--red-zoom-frame-image-x': `${Math.round(frameImagePos.x)}px`,\n            '--red-zoom-frame-image-y': `${Math.round(frameImagePos.y)}px`,\n        });\n\n        const frameRelativePos = vector.map(vector.sub(thumbSize, frameSize), (value, axis) => {\n            return value === 0 ? 0 : (frameLimitedPos[axis] - thumbPos[axis]) / value;\n        });\n        const lensImagePos = vector.mul(\n            frameRelativePos,\n            vector.sub(lensImageSize, lensContainerSize)\n        );\n        const lensImageCenterOffset = vector.max(vector.div(vector.sub(lensContainerSize, lensImageSize), 2), 0);\n        const lensImageFrameOffset = vector.mul(\n            vector.div(vector.sub(framePos, frameLimitedPos), vector.div(frameSize, 2)),\n            vector.div(lensContainerSize, 2)\n        );\n\n        this.template.setProperties({\n            '--red-zoom-lens-image-base-x': `${-lensImagePos.x}px`,\n            '--red-zoom-lens-image-base-y': `${-lensImagePos.y}px`,\n            '--red-zoom-lens-image-center-offset-x': `${lensImageCenterOffset.x}px`,\n            '--red-zoom-lens-image-center-offset-y': `${lensImageCenterOffset.y}px`,\n            '--red-zoom-lens-image-frame-offset-x': `${-lensImageFrameOffset.x}px`,\n            '--red-zoom-lens-image-frame-offset-y': `${-lensImageFrameOffset.y}px`,\n        });\n    }\n\n    invalidate() {\n        if (this.session && this.session.active) {\n            this.initSession();\n            this.move();\n        }\n    }\n\n    forceReflow(): void {\n        this.element.nativeElement.getBoundingClientRect();\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { RedZoomDirective } from './red-zoom.directive';\n\n\n@NgModule({\n    declarations: [\n        RedZoomDirective\n    ],\n    exports: [\n        RedZoomDirective\n    ]\n})\nexport class RedZoomModule { }\n"]}