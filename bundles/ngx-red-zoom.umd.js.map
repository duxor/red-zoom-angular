{"version":3,"file":"ngx-red-zoom.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/ngx-red-zoom/src/lib/red-zoom-template.class.ts","../../../projects/ngx-red-zoom/src/lib/red-zoom-image.class.ts","../../../projects/ngx-red-zoom/src/lib/vector.ts","../../../projects/ngx-red-zoom/src/lib/red-zoom.directive.ts","../../../projects/ngx-red-zoom/src/lib/red-zoom.module.ts","../../../../projects/ngx-red-zoom/src/public-api.ts","../../../../projects/ngx-red-zoom/src/ngx-red-zoom.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { RedZoomStatus } from './red-zoom-status.type';\n\n\nconst makeTemplate = (() => {\n    let template: HTMLTemplateElement = null;\n\n    return () => {\n        if (!template) {\n            template = document.createElement('template');\n            template.innerHTML = `<div class=\"red-zoom\">\n                <div class=\"red-zoom__overlay\"></div>\n                <div class=\"red-zoom__frame\">\n                    <div class=\"red-zoom__frame-body\"></div>\n                </div>\n                <div class=\"red-zoom__lens\">\n                    <div class=\"red-zoom__lens-body\"></div>\n                </div>\n                <div class=\"red-zoom__error\">\n                    <div class=\"red-zoom__error-message\"></div>\n                </div>\n            </div>`;\n        }\n\n        return template.content.cloneNode(true).firstChild as HTMLDivElement;\n    };\n})();\n\n\nexport class RedZoomTemplate {\n    _status: RedZoomStatus = null;\n\n    template: HTMLDivElement;\n    lens: HTMLDivElement;\n    lensBody: HTMLDivElement;\n    frame: HTMLDivElement;\n    frameBody: HTMLDivElement;\n    error: HTMLDivElement;\n    errorMessage: HTMLDivElement;\n\n    private appliedClasses: string[] = [];\n\n    constructor() {\n        this.template = makeTemplate();\n        this.lens = this.template.querySelector('.red-zoom__lens');\n        this.lensBody = this.template.querySelector('.red-zoom__lens-body');\n        this.frame = this.template.querySelector('.red-zoom__frame');\n        this.frameBody = this.template.querySelector('.red-zoom__frame-body');\n        this.error = this.template.querySelector('.red-zoom__error');\n        this.errorMessage = this.template.querySelector('.red-zoom__error-message');\n\n        this.template.addEventListener('transitionend', this.onTransitionEnd);\n        this.status = 'loading';\n    }\n\n    set status(state: RedZoomStatus) {\n        if (this._status !== null) {\n            this.template.classList.remove(`red-zoom--status--${this._status}`);\n        }\n\n        this._status = state;\n        this.template.classList.add(`red-zoom--status--${state}`);\n    }\n\n    get status(): RedZoomStatus {\n        return this._status;\n    }\n\n    set classes(classes: string) {\n        this.template.classList.remove(...this.appliedClasses);\n\n        classes = classes.trim();\n\n        if (classes) {\n            this.appliedClasses = classes.replace(/ +/, ' ').split(' ');\n            this.template.classList.add(...this.appliedClasses);\n        }\n    }\n\n    get isHidden(): boolean {\n        return getComputedStyle(this.template).visibility === 'hidden';\n    }\n\n    setProperties(properties: {[name: string]: string}): void {\n        for (let name in properties) {\n            this.template.style.setProperty(name, properties[name]);\n        }\n    }\n\n    detach(): void {\n        this.template.classList.remove('red-zoom--active');\n\n        if (this.isHidden) {\n            this.template.remove();\n        }\n    }\n\n    attach(): void {\n        if (this.template.parentNode !== document.body) {\n            document.body.appendChild(this.template);\n        }\n    }\n\n    activate(): void {\n        this.template.classList.add('red-zoom--active');\n    }\n\n    onTransitionEnd = (event: TransitionEvent) => {\n        if (event.propertyName === 'visibility' && this.isHidden) {\n            this.template.remove();\n        }\n    };\n}\n","import { RedZoomStatus } from './red-zoom-status.type';\nimport * as vector from './vector';\n\n\nexport class RedZoomImage {\n    private loading = false;\n\n    isFirst = true;\n\n    get width(): number {\n        return this.element.width;\n    }\n\n    get height(): number {\n        return this.element.height;\n    }\n\n    get size(): vector.VectorNumber {\n        return {x: this.width, y: this.height};\n    }\n\n    get naturalWidth(): number {\n        return this.element.naturalWidth;\n    }\n\n    get naturalHeight(): number {\n        return this.element.naturalHeight;\n    }\n\n    get naturalSize(): vector.VectorNumber {\n        return {x: this.naturalWidth, y: this.naturalHeight};\n    }\n\n    get style(): CSSStyleDeclaration {\n        return this.element.style;\n    }\n\n    set styleSize(value: vector.VectorString) {\n        this.element.style.width = value.x;\n        this.element.style.height = value.y;\n    }\n\n    get status(): RedZoomStatus {\n        if (this.loading) {\n            return 'loading';\n        }\n\n        if (this.element.complete) {\n            if (!this.element.src) {\n                return 'loading';\n            } else if (this.naturalWidth === 0) {\n                return 'error';\n            }\n\n            return 'loaded';\n        }\n\n        return 'loading';\n    }\n\n    set src(value: string) {\n        this.loading = false;\n        this.element.setAttribute('src', value);\n    }\n\n    constructor(\n        public element: HTMLImageElement = null,\n        public listener: () => void = () => {},\n        className: string = null,\n    ) {\n        if (element === null) {\n            this.element = document.createElement('img');\n        }\n\n        const _listener = () => {\n            if (this.status !== 'loading') {\n                this.isFirst = false;\n            }\n\n            this.listener();\n        };\n\n        this.element.addEventListener('load', _listener);\n        this.element.addEventListener('error', _listener);\n\n        this.destroy = () => {\n            this.element.removeEventListener('load', _listener);\n            this.element.removeEventListener('error', _listener);\n        };\n\n        if (className !== null) {\n            this.element.classList.add(className);\n        }\n    }\n\n    reset(): void {\n        this.loading = true;\n        this.listener();\n    }\n\n    destroy: () => void;\n}\n","type Operator = '+'|'-'|'*'|'/'|'min'|'max';\n\nfunction calc(a: number, op: Operator, b: number) {\n    switch (op) {\n        case '+': return a + b;\n        case '-': return a - b;\n        case '*': return a * b;\n        case '/': return a / b;\n        case 'min': return Math.min(a, b);\n        case 'max': return Math.max(a, b);\n    }\n}\n\nexport interface Vector<T> {\n    x: T,\n    y: T,\n}\n\nexport type VectorNumber = Vector<number>;\n\nexport type VectorString = Vector<string>;\n\nexport type VectorBoolean = Vector<boolean>;\n\nexport function fromRectPos(rect: ClientRect): VectorNumber {\n    return {x: rect.left, y: rect.top};\n}\n\nexport function fromRectSize(rect: ClientRect): VectorNumber {\n    return {x: rect.width, y: rect.height};\n}\n\nexport function fromScroll(): VectorNumber {\n    return {x: scrollX, y: scrollY};\n}\n\nexport function fromMouseEvent(event: MouseEvent): VectorNumber {\n    return add({x: event.clientX, y: event.clientY}, fromScroll());\n}\n\nexport function op(a: VectorNumber, op: Operator, b: VectorNumber | number): VectorNumber {\n    if (typeof b === 'number') {\n        b = {x: b, y: b};\n    }\n\n    return {\n        x: calc(a.x, op, b.x),\n        y: calc(a.y, op, b.y)\n    };\n}\n\nexport function add(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, '+', b);\n}\n\nexport function sub(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, '-', b);\n}\n\nexport function mul(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, '*', b);\n}\n\nexport function div(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, '/', b);\n}\n\nexport function min(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, 'min', b);\n}\n\nexport function max(a: VectorNumber, b: VectorNumber | number): VectorNumber {\n    return op(a, 'max', b);\n}\n\nexport function round(a: VectorNumber): VectorNumber {\n    return map(a, Math.round);\n}\n\nexport function map<T, B>(a: Vector<T>, fn: (c: T, axis: 'x'|'y') => B): Vector<B> {\n    return {x: fn(a.x, 'x'), y: fn(a.y, 'y')};\n}\n\nexport function equal(a: VectorNumber, b: VectorNumber | number): VectorBoolean {\n    if (typeof b === 'number') {\n        b = {x: b, y: b};\n    }\n\n    return {\n        x: a.x === b.x,\n        y: a.y === b.y,\n    };\n}\n\nexport function notEqual(a: VectorNumber, b: VectorNumber): VectorBoolean {\n    return {x: a.x !== b.x, y: a.y !== b.y};\n}\n\nexport function flatMax(a: VectorNumber): number {\n    return Math.max(a.x, a.y);\n}\n\nexport function flatMin(a: VectorNumber): number {\n    return Math.min(a.x, a.y);\n}\n\nexport function flatOr(a: VectorBoolean): boolean {\n    return a.x || a.y;\n}\n","import {\n    AfterContentInit,\n    Directive,\n    ElementRef,\n    Inject,\n    Input,\n    NgZone,\n    Renderer2,\n    OnChanges,\n    SimpleChanges,\n    HostBinding, OnDestroy, PLATFORM_ID\n} from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { RedZoomTemplate } from './red-zoom-template.class';\nimport { RedZoomStatus } from './red-zoom-status.type';\nimport { RedZoomImage } from './red-zoom-image.class';\nimport * as vector from './vector';\nimport { VectorNumber } from './vector';\n\n\ninterface Session {\n    active: boolean;\n    thumbSize: vector.VectorNumber;\n    thumbPos: vector.VectorNumber;\n    lensContainerSize: vector.VectorNumber;\n    lensImageSize: vector.VectorNumber;\n    frameSize: vector.VectorNumber;\n    mousePos: vector.VectorNumber;\n    destroy: () => void;\n}\n\n\n@Directive({\n    selector: '[redZoom]',\n    exportAs: 'redZoom',\n})\nexport class RedZoomDirective implements AfterContentInit, OnChanges, OnDestroy {\n    @Input('src') @HostBinding('attr.src') src: string;\n\n    @Input('redZoom') lensSrc: string;\n\n    @Input('redZoomThumb') thumbSrc: string;\n\n    @Input('redZoomLazy') lazy: boolean = false;\n\n    @Input('redZoomClass') classes: string = '';\n\n    @Input('redZoomBehavior') behavior: 'hover' | 'grab' | 'click' = 'hover';\n\n    @Input('redZoomMouseWheel') wheel: boolean = true;\n\n    @Input() minScaleFactor: number;\n\n    @Input() maxScaleFactor: number;\n\n    @Input('redZoomErrorMessage') errorMessage: string = 'An error occurred while loading the image.';\n\n    template: RedZoomTemplate;\n    thumbImage: RedZoomImage;\n    frameImage: RedZoomImage;\n    lensImage: RedZoomImage;\n    scaleFactor = 1;\n    session: Session;\n    requestAnimationFrameId = null;\n\n    get isImage(): boolean {\n        return this.element.nativeElement.tagName === 'IMG';\n    }\n\n    get status(): RedZoomStatus {\n        let status: RedZoomStatus = 'loaded';\n        const images = [this.frameImage, this.lensImage];\n\n        if (this.isImage) {\n            images.push(this.thumbImage);\n        }\n\n        for (let image of images) {\n            if (status === 'error' || image.status === 'error') {\n                status = 'error';\n            } else if (status === 'loading' || image.status === 'loading') {\n                status = 'loading';\n            }\n        }\n\n        return status;\n    }\n\n    constructor(\n        private element: ElementRef,\n        private renderer: Renderer2,\n        private zone: NgZone,\n        @Inject(PLATFORM_ID) private platformId: string,\n    ) { }\n\n    listen(): void {\n        const startEventName = {\n            'hover': 'mouseenter',\n            'grab': 'mousedown',\n            'click': 'mousedown',\n        }[this.behavior];\n\n        this.unlisten();\n        this.unlisten = this.renderer.listen(this.element.nativeElement, startEventName, this.mouseEnter);\n    }\n\n    unlisten: () => void  = () => {};\n\n    onImageChangeStatus = (() => {\n        let previousStatus;\n\n        return () => {\n            if (previousStatus === this.status) {\n                return;\n            }\n\n            previousStatus = this.status;\n\n            this.onImageChangeStatusDistinct();\n        };\n    })();\n\n    onImageChangeStatusDistinct = () => {\n        this.template.status = this.status;\n\n        if (this.status === 'loaded') {\n            this.template.setProperties({\n                '--red-zoom-lens-image-natural-w': `${this.lensImage.naturalWidth}px`,\n                '--red-zoom-lens-image-natural-h': `${this.lensImage.naturalHeight}px`,\n            });\n\n            if (this.session && this.session.active) {\n                this.calcScaleFactor();\n                this.calcFrameSize();\n                this.move();\n\n                this.scaleFactor = this.lensImage.width / this.lensImage.naturalWidth;\n            }\n        }\n    };\n\n    ngAfterContentInit(): void {\n        if (!isPlatformBrowser(this.platformId)) {\n            return;\n        }\n\n        this.zone.runOutsideAngular(() => {\n            this.template = new RedZoomTemplate();\n            this.template.classes = this.classes;\n            this.template.errorMessage.innerHTML = this.errorMessage;\n\n            if (this.isImage) {\n                this.thumbImage = new RedZoomImage(this.element.nativeElement, this.onImageChangeStatus);\n            }\n\n            this.frameImage = new RedZoomImage(null, this.onImageChangeStatus, 'red-zoom__frame-image');\n            this.lensImage = new RedZoomImage(null, this.onImageChangeStatus, 'red-zoom__lens-image');\n\n            if (!this.lazy) {\n                this.loadFrameImage();\n                this.loadLensImage();\n            }\n\n            this.listen();\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (!isPlatformBrowser(this.platformId)) {\n            return;\n        }\n\n        if ('src' in changes && !changes.src.firstChange) {\n            this.onChangeThumbSrc();\n        }\n        if ('thumbSrc' in changes && !changes.thumbSrc.firstChange) {\n            this.onChangeThumbSrc();\n        }\n        if ('lensSrc' in changes && !changes.lensSrc.firstChange) {\n            this.onChangeLensSrc();\n        }\n        if ('behavior' in changes && !changes.behavior.firstChange) {\n            this.listen();\n        }\n        if ('classes' in changes && !changes.classes.firstChange) {\n            this.template.classes = this.classes;\n            this.invalidate();\n        }\n        if ('errorMessage' in changes && !changes.errorMessage.firstChange) {\n            this.template.errorMessage.innerHTML = this.errorMessage;\n        }\n    }\n\n    ngOnDestroy(): void {\n        if (!isPlatformBrowser(this.platformId)) {\n            return;\n        }\n\n        if (this.session) {\n            this.session.destroy();\n        }\n    }\n\n    onChangeThumbSrc(): void {\n        this.frameImage.reset();\n\n        if (!this.lazy || this.session) {\n            this.loadFrameImage();\n        }\n    }\n\n    onChangeLensSrc(): void {\n        this.lensImage.reset();\n\n        if (!this.lazy || this.session) {\n            this.loadLensImage();\n        }\n    }\n\n    getThumbSrc(): string {\n        if (!this.isImage || !this.src) {\n            return this.thumbSrc;\n        }\n\n        return this.src;\n    }\n\n    loadLensImage() {\n        if (this.lensImage.status !== 'loaded') {\n            this.lensImage.src = this.lensSrc;\n        }\n    }\n\n    loadFrameImage() {\n        if (this.frameImage.status !== 'loaded') {\n            this.frameImage.src = this.getThumbSrc();\n        }\n    }\n\n    mouseEnter = (event: MouseEvent) => {\n        if (event.cancelable) {\n            event.preventDefault();\n        }\n\n        if (this.session) {\n            this.session.destroy();\n        }\n\n        this.session = {\n            active: false,\n            thumbSize: null,\n            thumbPos: null,\n            lensContainerSize: null,\n            lensImageSize: null,\n            frameSize: null,\n            mousePos: vector.fromMouseEvent(event),\n            destroy: () => {},\n        };\n\n        const onWheel = (wheelEvent: WheelEvent) => {\n            if (!wheelEvent.cancelable || this.status !== 'loaded' || !this.wheel) {\n                return;\n            }\n\n            wheelEvent.preventDefault();\n\n            const delta = Math.sign(wheelEvent.deltaY);\n            const nextScaleFactor = this.scaleFactor + .01 * -delta;\n\n            console.log(nextScaleFactor);\n\n            if (this.minScaleFactor !== undefined && nextScaleFactor < this.minScaleFactor) {\n                return;\n            }\n            if (this.maxScaleFactor !== undefined && nextScaleFactor > this.maxScaleFactor) {\n                return;\n            }\n\n            this.scaleFactor += .01 * -delta;\n\n            this.calcScaleFactor();\n            this.calcFrameSize();\n            this.onMouseMove(\n                this.behavior === 'click' ? this.session.mousePos : vector.fromMouseEvent(wheelEvent),\n            );\n        };\n\n        const onMove = (mouseEvent: MouseEvent) => {\n            this.onMouseMove(vector.fromMouseEvent(mouseEvent));\n        };\n        const onLeave = () => {\n            this.session = null;\n            this.template.detach();\n\n            unListenMove();\n            unListenLeave();\n            unListenWheel();\n        };\n\n        let unListenMove;\n        let unListenLeave;\n        let unListenWheel;\n\n        if (this.behavior === 'hover') {\n            unListenMove = this.renderer.listen(this.element.nativeElement, 'mousemove', onMove);\n            unListenLeave = this.renderer.listen(this.element.nativeElement, 'mouseleave', onLeave);\n        } else if (this.behavior === 'click') {\n            unListenMove = () => {};\n            unListenLeave = this.renderer.listen(document, 'mousedown', (event) => {\n                const element = this.element.nativeElement as HTMLElement;\n\n                if (!element.contains(event.target)) {\n                    onLeave();\n                }\n            });\n        } else {\n            unListenMove = this.renderer.listen(document, 'mousemove', onMove);\n            unListenLeave = this.renderer.listen(document, 'mouseup', onLeave);\n        }\n\n        unListenWheel = this.renderer.listen(this.element.nativeElement, 'wheel', onWheel);\n\n        this.onMouseMove(vector.fromMouseEvent(event));\n\n        this.forceReflow();\n        this.template.activate();\n\n        if (this.status !== 'loaded') {\n            this.loadLensImage();\n            this.loadFrameImage();\n        }\n\n        this.session.destroy = onLeave;\n    };\n\n    onMouseMove = (mousePos: VectorNumber) => {\n        if (this.isImage && this.thumbImage.status !== 'loaded' && this.thumbImage.isFirst) {\n            return;\n        }\n\n        if (!this.session.active) {\n            this.session.active = true;\n            this.initSession();\n        }\n\n        this.session.mousePos = mousePos;\n\n        if (this.status === 'loaded') {\n            cancelAnimationFrame(this.requestAnimationFrameId);\n\n            this.requestAnimationFrameId = requestAnimationFrame(() => this.move());\n        }\n    };\n\n    initSession(): void {\n        const thumbRect = this.element.nativeElement.getBoundingClientRect();\n\n        this.session.thumbSize = vector.fromRectSize(thumbRect);\n        this.session.thumbPos = vector.add(vector.fromRectPos(thumbRect), vector.fromScroll());\n\n        this.template.attach();\n        this.template.lensBody.appendChild(this.lensImage.element);\n        this.template.frameBody.appendChild(this.frameImage.element);\n\n        this.template.setProperties({\n            '--red-zoom-thumb-x': `${this.session.thumbPos.x}px`,\n            '--red-zoom-thumb-y': `${this.session.thumbPos.y}px`,\n            '--red-zoom-thumb-w': `${this.session.thumbSize.x}px`,\n            '--red-zoom-thumb-h': `${this.session.thumbSize.y}px`,\n            '--red-zoom-thumb-size-max': `${vector.flatMax(this.session.thumbSize)}px`,\n            '--red-zoom-thumb-size-min': `${vector.flatMin(this.session.thumbSize)}px`,\n        });\n\n        if (this.status === 'loaded') {\n            this.calcScaleFactor();\n            this.calcFrameSize();\n\n            this.scaleFactor = this.lensImage.width / this.lensImage.naturalWidth;\n        }\n    }\n\n    calcScaleFactor(): void {\n        const scaledSize = vector.mul(this.lensImage.naturalSize, this.scaleFactor);\n\n        this.lensImage.styleSize = vector.map(scaledSize, c => `${c}px`);\n\n        const scaleFactorIsLimited = vector.flatOr(\n            vector.notEqual(this.lensImage.size, vector.round(scaledSize))\n        );\n\n        if (scaleFactorIsLimited) {\n            this.scaleFactor = vector.flatMax(vector.div(this.lensImage.size, this.lensImage.naturalSize));\n\n            this.lensImage.styleSize = vector.map(vector.mul(this.lensImage.naturalSize, this.scaleFactor), c => `${c}px`);\n        }\n    }\n\n    calcFrameSize(): void {\n        this.session.lensContainerSize = vector.fromRectSize(this.template.lensBody.getBoundingClientRect());\n        this.session.lensImageSize = vector.fromRectSize(this.lensImage.element.getBoundingClientRect());\n\n        this.session.frameSize = vector.min(\n            this.session.thumbSize,\n            vector.round(\n                vector.mul(\n                    this.session.thumbSize, vector.div(this.session.lensContainerSize, this.session.lensImageSize)\n                )\n            )\n        );\n\n        this.template.setProperties({\n            '--red-zoom-frame-w': `${this.session.frameSize.x}px`,\n            '--red-zoom-frame-h': `${this.session.frameSize.y}px`,\n        });\n    }\n\n    move(): void {\n        if (!this.session || !this.session.active) {\n            return;\n        }\n\n        const { mousePos, thumbSize, thumbPos, frameSize, lensContainerSize, lensImageSize } = this.session;\n\n        this.template.setProperties({\n            '--red-zoom-mouse-x': `${mousePos.x}px`,\n            '--red-zoom-mouse-y': `${mousePos.y}px`,\n        });\n\n        const framePos = vector.sub(mousePos, vector.div(frameSize, 2));\n        const frameLimitedPos = vector.min(\n            vector.max(framePos, thumbPos),\n            vector.sub(vector.add(thumbPos, thumbSize), frameSize),\n        );\n        const frameImagePos = vector.sub(thumbPos, vector.round(frameLimitedPos));\n\n        this.template.setProperties({\n            '--red-zoom-frame-x': `${Math.round(frameLimitedPos.x)}px`,\n            '--red-zoom-frame-y': `${Math.round(frameLimitedPos.y)}px`,\n            '--red-zoom-frame-image-x': `${Math.round(frameImagePos.x)}px`,\n            '--red-zoom-frame-image-y': `${Math.round(frameImagePos.y)}px`,\n        });\n\n        const frameRelativePos = vector.map(vector.sub(thumbSize, frameSize), (value, axis) => {\n            return value === 0 ? 0 : (frameLimitedPos[axis] - thumbPos[axis]) / value;\n        });\n        const lensImagePos = vector.mul(\n            frameRelativePos,\n            vector.sub(lensImageSize, lensContainerSize)\n        );\n        const lensImageCenterOffset = vector.max(vector.div(vector.sub(lensContainerSize, lensImageSize), 2), 0);\n        const lensImageFrameOffset = vector.mul(\n            vector.div(vector.sub(framePos, frameLimitedPos), vector.div(frameSize, 2)),\n            vector.div(lensContainerSize, 2)\n        );\n\n        this.template.setProperties({\n            '--red-zoom-lens-image-base-x': `${-lensImagePos.x}px`,\n            '--red-zoom-lens-image-base-y': `${-lensImagePos.y}px`,\n            '--red-zoom-lens-image-center-offset-x': `${lensImageCenterOffset.x}px`,\n            '--red-zoom-lens-image-center-offset-y': `${lensImageCenterOffset.y}px`,\n            '--red-zoom-lens-image-frame-offset-x': `${-lensImageFrameOffset.x}px`,\n            '--red-zoom-lens-image-frame-offset-y': `${-lensImageFrameOffset.y}px`,\n        });\n    }\n\n    invalidate() {\n        if (this.session && this.session.active) {\n            this.initSession();\n            this.move();\n        }\n    }\n\n    forceReflow(): void {\n        this.element.nativeElement.getBoundingClientRect();\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { RedZoomDirective } from './red-zoom.directive';\n\n\n@NgModule({\n    declarations: [\n        RedZoomDirective\n    ],\n    exports: [\n        RedZoomDirective\n    ]\n})\nexport class RedZoomModule { }\n","/*\n * Public API Surface of ngx-red-zoom\n */\n\nexport * from './lib/red-zoom.module';\nexport { RedZoomDirective } from './lib/red-zoom.directive';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["vector.fromMouseEvent","isPlatformBrowser","vector.fromRectSize","vector.add","vector.fromRectPos","vector.fromScroll","vector.flatMax","vector.flatMin","vector.mul","vector.map","vector.flatOr","vector.notEqual","vector.round","vector.div","vector.min","vector.sub","vector.max","Directive","ElementRef","Renderer2","NgZone","Inject","PLATFORM_ID","Input","HostBinding","NgModule"],"mappings":"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"}